!function(n){tinymce.create("tinymce.plugins.VlsGfButtons",{init:function(n,t){n.addButton("vls_gf_album",{title:vlsGfTinymceL10n.btnInsertGFAlbum,cmd:"albumShortcode"}),n.addCommand("albumShortcode",this.showAlbumSelectionDialog,{self:this,editor:n})},getInfo:function(){return{longname:"Gallery Factory Buttons",author:"Vilyon",authorurl:"http://galleryfactory.vilyon.net",infourl:"http://galleryfactory.vilyon.net",version:"2.0.0"}},showAlbumSelectionDialog:function(){var t=this.self,l=this.editor;l.windowManager.open({id:"vls-gf-album-shortcode-dialog",html:'<div class="vls-gf-loading-overlay"><span></span></div>',width:500,height:.7*(n(window).height()-36-50),title:vlsGfTinymceL10n.strDialogTitle,buttons:[{text:vlsGfTinymceL10n.btnCancel,onclick:"close"}]}),n.get(ajaxurl,{action:"vls_gf_view_tinymce_album_selection_dialog"},function(n){t.initModalContent(n,l)},"html")},initModalContent:function(t,l){var i=n("#vls-gf-album-shortcode-dialog-body");i.empty().append(t),i.find("li.vls-gf-folder>i").on("click",function(){var t=n(this).parent();return t.hasClass("vls-gf-opened")?t.children("ul").slideUp(300):t.children("ul").slideDown(300),t.toggleClass("vls-gf-opened"),!1}),"page"===vlsGfTinymceL10n.postType&&i.find("li.vls-gf-folder").on("click",function(){var t=n(this).data("id");return l.insertContent('[vls_gf_viewer id="'+t+'" header_tag="h2" header_class=""]'),l.windowManager.close(),!1}),i.find("li.vls-gf-album").on("click",function(){var t=n(this).data("id");return l.insertContent('[vls_gf_album id="'+t+'"]'),l.windowManager.close(),!1})}}),tinymce.PluginManager.add("vls_gf_buttons",tinymce.plugins.VlsGfButtons)}(jQuery);